<launch>
  <group>
    <remap from="/pose" to="/indoor/pose" />
    <node pkg="tb_simulation" type="map_link_broadcaster" name="map_link_broadcaster" />
  </group>
  <group>
    <node pkg="tb_simulation" type="start_morse" name="morse"
          args="run $(find tb_simulation)/src/default.py" />
  </group>
  <group>
    <remap from="/waypoint" to="/indoor/waypoint_controller" />
    <remap from="/pose" to="/indoor/pose" />
    <remap from="/plan_path" to="/nbvplanner" />
    <node pkg="tb_simulation" type="path_follower" name="path_follower" output="screen"
          launch-prefix="$(find tb_simulation)/util/tmuxgdb" />
  </group>
  <group>
    <remap from="/cloud_in" to="/indoor/depth_cloud" />
    <node pkg="octomap_server" type="octomap_server_node" name="octomap_server">
      <!-- Make sure the projected map is actually at the height we want it to be at -->
      <!-- TODO: This creates a pretty terrible map with lots of faux unexplored space.
                 Maybe project the map ourselves with different z thresholds for
                 exploration and obstacles? -->
      <param name="occupancy_min_z" type="double" value="0.9" />
      <param name="occupancy_max_z" type="double" value="1.1" />
      <param name="resolution" type="double" value="0.4" />
    </node>
  </group>
</launch>
